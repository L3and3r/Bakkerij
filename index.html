<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>Fries Roggebrood – Ambachtelijk</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  :root { --bg:#f6f1ea; --dark:#3b2f2f; --accent:#8b5e3c; --light:#fff; }
  body{margin:0;font-family:Georgia,serif;background:var(--bg);color:var(--dark);}
  header{background:var(--dark);color:var(--light);text-align:center;padding:2rem;}
  header h1{margin:0;font-size:2.2rem;letter-spacing:0.05em;}
  header p{margin-top:0.5rem;font-style:italic;opacity:0.9;}
  main{max-width:720px;margin:3rem auto;padding:0 1.5rem;}
  h2{border-bottom:2px solid var(--accent);padding-bottom:0.5rem;margin-bottom:1.5rem;}
  form{background:var(--light);padding:2rem;border:1px solid #ddd;border-radius:4px;}
  label{display:block;margin-bottom:0.3rem;font-weight:bold;}
  input, select{width:100%;padding:0.6rem;margin-bottom:1.2rem;font-size:1rem;border:1px solid #ccc;border-radius:3px;font-family:inherit;}
  button{background:var(--accent);color:var(--light);border:none;padding:0.8rem 1.5rem;font-size:1rem;cursor:pointer;border-radius:3px;}
  button:hover{background:#744a2d;}
</style>
</head>
<body>
<header>
  <h1>Fries Roggebrood</h1>
  <p>Volgens oud recept — langzaam gebakken, puur en eerlijk</p>
</header>
<main>
  <section>
    <h2>Bestellen</h2>
    <form>
      <label for="naam">Naam</label>
      <input type="text" id="naam" name="naam" required>

      <label for="email">E-mailadres</label>
      <input type="email" id="email" name="email" required>

      <label for="product">Kies uw roggebrood</label>
      <select id="product" name="product" required>
        <option value="">— maak een keuze —</option>
        <option value="heel">Heel roggebrood</option>
        <option value="half">Half roggebrood</option>
      </select>

      <label for="aantal">Aantal</label>
      <input type="number" id="aantal" name="aantal" min="1" value="1" required>

      <label for="betaling">Betaalmethode</label>
      <select id="betaling" name="betaling" required>
        <option value="">— kies —</option>
        <option value="ideal">iDEAL</option>
        <option value="lightning">Lightning</option>
      </select>

      <button type="submit">Bestelling plaatsen & Betalen</button>
    </form>
    <div id="response"></div>
  </section>
</main>
<script>
const form = document.querySelector('form');
form.addEventListener('submit', async e => {
  e.preventDefault();
  const data = {
    naam: form.naam.value,
    email: form.email.value,
    product: form.product.value,
    aantal: form.aantal.value,
    betaling: form.betaling.value
  };
  const respDiv = document.getElementById('response');
  respDiv.innerHTML = "Even geduld...";
  try {
    const res = await fetch('https://jouw-vercel-backend.vercel.app/api/bestelling', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify(data)
    });
    const json = await res.json();
    if(json.url) window.location.href=json.url;
    else if(json.invoice){
      respDiv.innerHTML = `<p>Scan de QR-code met je Lightning-wallet:</p>
                           <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${json.invoice.payment_request}">`;
    }
  } catch(err){ respDiv.innerHTML = 'Fout: '+err.message; }
});
</script>
</body>
</html>
